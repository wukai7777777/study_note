<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    var temp2 = [
  {
    "pathType": "path",
    "name": "test",
    "children": [
      {
        "pathType": "path",
        "name": "dbo",
        "children": [
          {
            "pathType": "table",
            "name": "a_ivt_audit_heis",
            "tableType": "TABLE",
            "hasAuth": true
          },
          {
            "pathType": "table",
            "name": "a_ivt_college",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "a_ivt_countries",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "a_ivt_departments",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "a_ivt_employees",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "a_ivt_jobs",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "a_ivt_locations",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "A_IVT_MOVIE",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "a_ivt_nature_reserve",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "a_ivt_num_college",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "a_ivt_regions",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "calculation",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "calculation2",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "calculationold",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "Client_R_Account",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "correctness",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "dbo",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "filtertest",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "M_Status",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "perf_100m_new",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "perf_10m_new",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "perf_1k",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "perf_wss_20190423",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_boxplot",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_coffee_customer_info",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_coffee_sales",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_connection_permission",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_correctness_text",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_data_groups",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_date_format_test",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_float_number",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_fusion_classroom",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_fusion_course",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_fusion_selectcourse",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_fusion_student",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_fusion_teacherschedule",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_integer_boundary",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_jsonget",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_newcolumn_chart",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_null_replace",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_pipeline_sourcenode",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_row_permission",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_test_zyy",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_type_conversion",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_union_base",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_union_base_text",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_union_date",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_union_number",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_union_text",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "qa_union_time",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "Segment",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "sqlserver_all_date_time_type",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "sqlserver_all_number_type",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "sqlserver_all_string_type",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "sqlsever_all_data_types",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "test_nchar",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "test_text1",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "test1",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "testvar",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "wss_test_decimal",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "A_IVT_MOVIE_view",
            "tableType": "VIEW"
          }
        ]
      },
      {
        "pathType": "path",
        "name": "guest",
        "children": [
          {
            "pathType": "table",
            "name": "NewTable",
            "tableType": "TABLE"
          }
        ]
      }
    ]
  },
  {
    "pathType": "path",
    "name": "mytest",
    "children": [
      {
        "pathType": "path",
        "name": "dbo",
        "children": [
          {
            "pathType": "table",
            "name": "mytbl",
            "tableType": "TABLE"
          }
        ]
      }
    ]
  },
  {
    "pathType": "path",
    "name": "qa",
    "children": [
      {
        "pathType": "path",
        "name": "dbo",
        "children": [
          {
            "pathType": "table",
            "name": "test",
            "tableType": "TABLE"
          }
        ]
      },
      {
        "pathType": "path",
        "name": "qa",
        "children": [
          {
            "pathType": "table",
            "name": "air_monitor_day",
            "tableType": "TABLE"
          },
          {
            "pathType": "table",
            "name": "air_monitor_hour",
            "tableType": "TABLE"
          }
        ]
      }
    ]
  }
]

// 通过树的path 筛选 有效 唯一叶子 节点

// 方法一
function fnTree(data, paths) {
    var name = paths.shift();
    for(var i=data.length-1; i>=0; i--) {
      if(data[i].name !== name) {
        data.splice(i, 1);
      }
    }
    if(paths.length) {
        fnTree(data[0].children, paths)
    }
    return data;
}

// // 方法二
// function fnTree(data, paths, parent) {
//     var name = paths.shift();
//     var temp = data.filter(ele => ele.name === name);
//     if(parent) {
//       parent[0].children = temp;
//     }
//     if(paths.length) {
//         fnTree(temp[0].children, paths, temp)
//     }
//     return temp;
// }

console.log(fnTree(temp2, ['test', 'guest', 'NewTable']))
</script>
</body>
</html>