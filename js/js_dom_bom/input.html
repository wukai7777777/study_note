<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <input id="number" type="text" oninput="onlyNumber(this)">
    <script>
        var dom = document.getElementById('number')

        function onlyNumber() {
            var obj = dom
                //console.log(obj)
                //得到第一个字符是否为负号    
            var t = obj.value.charAt(0);
            // console.log(obj.value, 1)
            //     //先把非数字的都替换掉，除了数字和.     
            obj.value = obj.value.replace(/[^\d\.]/g, '');
            // console.log(obj.value, 2)
            //     //必须保证第一个为数字而不是.       
            obj.value = obj.value.replace(/^\./g, '');
            // console.log(obj.value, 3)
            //     //保证只有出现一个.而没有多个.       
            obj.value = obj.value.replace(/\.{2,}/g, '.');
            // console.log(obj.value, 4)
            //保证.只出现一次，而不能出现两次以上       
            obj.value = obj.value.replace('.', '$#$').replace(/\./g, '').replace('$#$', '.');
            console.log(obj.value, 5)
            obj.value = obj.value.replace(/(\d+)\.(\d\d).*$/, '$1.$2');
            console.log(obj.value, 6)
                //如果第一位是负号，则允许添加    
            if (t == '-') {
                return;
            }
        }
    </script>
</body>

</html>