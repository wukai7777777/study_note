(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],f=0,d=[];f<s.length;f++)i=s[f],a[i]&&d.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"008b":function(e,t){},"08cd":function(e,t,n){"use strict";var r=n("51d2"),a=n.n(r);a.a},"0c6b":function(e,t,n){},"12cb":function(e,t){},"1f86":function(e,t,n){"use strict";var r=n("92a7"),a=n.n(r);a.a},4678:function(e,t,n){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="4678"},"51d2":function(e,t,n){},"54a4":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("7f7f"),n("cadf"),n("551c"),n("f751"),n("097d");var r=n("8bbf"),a=n.n(r),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"view"},[n("router-view")],1)},i=[],s=(n("4917"),n("3b2b"),n("ac6a"),n("06db"),n("5df3"),n("d225")),c=n("b0b4"),u=n("795b"),l=n.n(u),f=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,d=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction,h=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;window.indexedDB||window.alert("Your browser doesn't support a stable version of IndexedDB.");var m=2;function b(e,t,n){return new l.a(function(r,a){var o;try{if(o=f.open(e,m),!o)throw new Error}catch(s){console.error("error opening db",s.message),a(s)}var i=!1;setTimeout(function(){i||o.onerror({type:"IDB_CREATE_TIMEOUT"})},3e3),o.onsuccess=function(e){i=!0;var t=o.result;t.onerror=function(e){console.error("Error creating/accessing IndexedDB database",e),a(e)},r(t)},o.onerror=function(e){i=!0,console.error("Error creating/accessing IndexedDB database",e),a(e)},o.onupgradeneeded=function(e){i=!0,console.warn("performing idb upgrade from",e.oldVersion,"to",e.newVersion);var r=e.target.result;1===e.oldVersion&&r.deleteObjectStore(t),n(r)}})}var g=function(){function e(){Object(s["a"])(this,e),this.dbStoreName="messages",this.dbName="messagesDB"}return Object(c["a"])(e,[{key:"openDatabase",value:function(){var e=this;return this.openDbPromise?this.openDbPromise:(this.openDbPromise=b(this.dbName,this.dbStoreName,function(t){var n=t.createObjectStore(e.dbStoreName);n.createIndex("dialogIndex",["dialogId","m.stime"],{unique:!1}),n.createIndex("fromIdIndex",["dialogId","s","m.stime"],{unique:!1})}),this.openDbPromise)}},{key:"setItem",value:function(e,t){var n=this.dbStoreName;return this.openDatabase().then(function(r){return new l.a(function(a,o){var i;try{var s=r.transaction([n],d.READ_WRITE||"readwrite").objectStore(n);i=s.put(t,e)}catch(c){return l.a.reject(c)}i.onsuccess=function(e){a(t)},i.onerror=function(e){o(e)}})})}},{key:"getItem",value:function(e){var t=this.dbStoreName;return this.openDatabase().then(function(n){return new l.a(function(r,a){var o=n.transaction([t],d.READ||"readonly").objectStore(t),i=o.get(e);i.onsuccess=function(e){var t=e.target.result;void 0===t?r():r(t)},i.onerror=function(e){a(e)}})})}},{key:"getMessagesWithDialogId",value:function(e,t,n){var r=this.dbStoreName;return this.openDatabase().then(function(a){return new l.a(function(o,i){var s=t;s="number"===typeof s?s:-1;var c=a.transaction([r],d.READ||"readonly").objectStore(r),u=c.index("dialogIndex"),l=u.openCursor(h.bound([e],[e,n||""],!1,!0),"prev"),f=[];l.onsuccess=function(e){var t=e.target.result;if(t&&0!==s){var n=t.value;f.unshift(n),s--,t.continue()}else o(f)},l.onerror=function(e){i(e)}})})}},{key:"deleteMessagesInGroup",value:function(e,t,n,r){var a=this.dbStoreName;return this.openDatabase().then(function(o){return new l.a(function(i,s){var c=o.transaction([a],d.READ||"readwrite").objectStore(a),u=c.index("fromIdIndex"),l=u.openCursor(h.bound([e,t,r],[e,t,n],!1,!0),"prev");l.onsuccess=function(e){var t=e.target.result;t?("HyperText"===t.value.c&&"application/withdraw"!==t.value.m.MIMETYPE&&"application/withdraw"!==t.value.m.MIMETYPE&&t.delete(t.primaryKey),t.continue()):i()},l.onerror=function(e){s(e)}})})}},{key:"deleteMessage",value:function(e){var t=this.dbStoreName;return this.openDatabase().then(function(n){return new l.a(function(r,a){var o=n.transaction([t],d.READ||"readwrite").objectStore(t),i=o.delete(e);i.onsuccess=function(e){r()},i.onerror=function(e){a(e)}})})}},{key:"clean",value:function(){var e=this.dbStoreName;return this.openDatabase().then(function(t){return new l.a(function(n,r){var a=t.transaction([e],d.READ||"readwrite").objectStore(e),o=a.clear();o.onsuccess=function(e){n()},o.onblocked=function(e){n()},o.onerror=function(e){r(e)}})})}}]),e}(),p=new g;p.openDatabase();var v=function(){function e(){Object(s["a"])(this,e),this.dbStoreName="peers",this.dbName="peersDB"}return Object(c["a"])(e,[{key:"openDatabase",value:function(){var e=this;return this.openDbPromise?this.openDbPromise:(this.openDbPromise=b(this.dbName,this.dbStoreName,function(t){var n=t.createObjectStore(e.dbStoreName);n.createIndex("contact",["detail.mtime"],{unique:!1}),n.createIndex("dialogs",["dialogInfo.lastReactTime"],{unique:!1})}),this.openDbPromise)}},{key:"setItem",value:function(e,t){var n=this.dbStoreName;return this.openDatabase().then(function(r){var a;try{var o=r.transaction([n],d.READ_WRITE||"readwrite").objectStore(n);a=o.put(t,e)}catch(i){return l.a.reject(i)}return new l.a(function(e,n){a.onsuccess=function(n){e(t)},a.onerror=function(e){n(e)}})})}},{key:"setItemArray",value:function(e){var t=this.dbStoreName;return this.openDatabase().then(function(n){return new l.a(function(r,a){var o=[];try{for(var i=n.transaction([t],d.READ_WRITE||"readwrite").objectStore(t),s=0;s<e.length;s++){var c=e[s];o.push(i.put(c,c.hid))}}catch(u){return l.a.reject(u)}l.a.all(o).then(function(){r()},function(e){a(e)})})})}},{key:"getItem",value:function(e){var t=this.dbStoreName;return this.openDatabase().then(function(n){return new l.a(function(r,a){var o=n.transaction([t],d.READ||"readonly").objectStore(t),i=o.get(e);i.onsuccess=function(e){var t=e.target.result;void 0===t?r():r(t)},i.onerror=function(e){a(e)}})})}},{key:"getPeersWithSearchKey",value:function(e){var t=this.dbStoreName;return this.openDatabase().then(function(n){return new l.a(function(r,a){var o=n.transaction([t],d.READ||"readonly").objectStore(t),i=o.index("contact"),s=i.openCursor(),c=[];s.onsuccess=function(t){var n=t.target.result;if(n){var a=n.value,o=new RegExp(e,"i");(a.filter?a.filter.match(o):!e)&&c.unshift(a),n.continue()}else r(c)},s.onerror=function(e){a(e)}})})}},{key:"resetSearchKey",value:function(){this.searchKey=null}},{key:"clean",value:function(){var e=this.dbStoreName;return this.openDatabase().then(function(t){return new l.a(function(n,r){var a=t.transaction([e],d.READ_WRITE||"readwrite").objectStore(e),o=a.clear();o.onsuccess=function(e){n()},o.onblocked=function(e){n()},o.onerror=function(e){r(e)}})})}}]),e}(),j=new v;j.openDatabase();var y=function(){function e(){Object(s["a"])(this,e),this.dbStoreName="bitFile",this.dbName="bitFileDB"}return Object(c["a"])(e,[{key:"openDatabase",value:function(){var e=this;return this.openDbPromise?this.openDbPromise:(this.openDbPromise=b(this.dbName,this.dbStoreName,function(t){var n=t.createObjectStore(e.dbStoreName);n.createIndex("hid","hid",{unique:!0})}),this.openDbPromise)}},{key:"setItem",value:function(e,t){var n=this.dbStoreName;return this.openDatabase().then(function(r){return new l.a(function(a,o){var i;try{var s=r.transaction([n],d.READ_WRITE||"readwrite").objectStore(n);i=s.put(t,e)}catch(c){return l.a.reject(c)}i.onsuccess=function(e){a(t)},i.onerror=function(e){o(e)}})})}},{key:"getItem",value:function(e){var t=this.dbStoreName;return this.openDatabase().then(function(n){return new l.a(function(r,a){var o=n.transaction([t],d.READ||"readonly").objectStore(t),i=o.get(e);i.onsuccess=function(e){var t=e.target.result;void 0===t?r():r(t)},i.onerror=function(e){a(e)}})})}},{key:"clean",value:function(){var e=this.dbStoreName;return this.openDatabase().then(function(t){return new l.a(function(n,r){var a=t.transaction([e],d.READ_WRITE||"readwrite").objectStore(e),o=a.clear();o.onsuccess=function(e){n()},o.onblocked=function(e){n()},o.onerror=function(e){r(e)}})})}},{key:"getDataByIdx",value:function(e){var t=this.dbStoreName;return this.openDatabase().then(function(n){return new l.a(function(r,a){var o=n.transaction([t],d.READ||"readonly").objectStore(t),i=h.only(e),s=o.index("hid").openCursor(i),c=[];s.onsuccess=function(e){var t=e.target.result;t?(c.push(t.value),t.continue()):r(c)},s.onerror=function(e){a(e)}})})}}]),e}(),S=new y;S.openDatabase();var w={messageStorage:p,peersStorage:j,docStorage:S},k={},P=k,x=(n("08cd"),n("2877")),D=Object(x["a"])(P,o,i,!1,null,"7aaa7bdc",null),O=D.exports,C=n("85b3"),I=n.n(C),E=n("6389"),N=n.n(E),R=n("0a89"),T=n.n(R),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("LeftNav")],1)},B=[],L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"nav-container"},e._l(e.menuList,function(t,r){return n("el-tooltip",{key:r,attrs:{placement:"right",content:t.label}},[n("section",{class:["svg-menu",e.isSvgActive===r?"svg-menu--active":""],on:{click:function(t){return e.menuClickHandle(r)}}},[n("SvgIcon",{attrs:{iconClass:e.isSvgActive===r?t.activeIcon:t.defaultIcon}})],1)])}),1)},A=[],z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"svg-icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":e.iconName}})])},F=[],H={name:"SvgIcon",props:{iconClass:{type:String,required:!0}},computed:{iconName:function(){return"#".concat(this.iconClass)}}},M=H,$=(n("76b7"),Object(x["a"])(M,z,F,!1,null,"7a6e9b2e",null)),q=$.exports,W={name:"LeftNav",components:{SvgIcon:q},data:function(){return{isSvgActive:0,menuList:[{label:"消息",defaultIcon:"icon-icon_community_line",activeIcon:"icon-icon_replieslist"},{label:"通讯录",defaultIcon:"icon-qunzu",activeIcon:"icon-qunzutianchong"},{label:"日历",defaultIcon:"icon-rili",activeIcon:"icon-rilitianchong"},{label:"设置",defaultIcon:"icon-shezhi",activeIcon:"icon-shezhitianchong"}]}},methods:{menuClickHandle:function(e){this.isSvgActive=e}}},K=W,U=(n("9300"),Object(x["a"])(K,L,A,!1,null,"1aa22201",null)),V=U.exports,G=n("85f2"),Y=n.n(G),J=n("268f"),Z=n.n(J),X=n("a4bb"),Q=n.n(X);function ee(e){return e=e||window.event,e&&(e=e.originalEvent||e,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1,e.cancelBubble=!0),!1}function te(e){for(var t=Q()(e),n=0;n<t.length;n++)ne(e,t[n],e[t[n]])}function ne(e,t,n){var r=Z()(e,t);if(!r||!1!==r.configurable){var a=r&&r.get;Y()(e,t,{enumerable:!0,configurable:!0,get:function(){var r=a?a.call(e):n;return r=r||localStorage.getItem(t),r}})}}var re={cancelEvent:ee,defineObjectGetter:te},ae=(n("6c7b"),n("28a5"),n("c5f6"),n("34ef"),n("e814")),oe=n.n(ae),ie=n("774e"),se=n.n(ie),ce=(n("6b54"),n("a481"),n("bd86")),ue=n("6199"),le=n.n(ue),fe=n("da5a"),de=n.n(fe),he="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",me={base64:{label:"Standard 'base64' (RFC 3548, RFC 4648)",description:null,alphabet:he+"+/",padCharacter:"=",padCharacterOptional:!1,foreignCharactersForbidden:!0},base64url:{label:"Standard 'base64url' (RFC 4648 §5)",description:"URL and Filename Safe Alphabet",alphabet:he+"-_",padCharacter:"=",padCharacterOptional:!0,foreignCharactersForbidden:!0},rfc2045:{label:"Transfer encoding for MIME (RFC 2045)",description:null,alphabet:he+"+/",padCharacter:"=",padCharacterOptional:!1,foreignCharactersForbidden:!1,maxLineLength:76,lineSeparator:"\r\n"},rfc1421:{label:"Original Base64 (RFC 1421)",description:"Privacy-Enhanced Mail (PEM)",alphabet:he+"+/",padCharacter:"=",padCharacterOptional:!1,foreignCharactersForbidden:!0,maxLineLength:64,lineSeparator:"\r\n"}},be=function(){function e(){Object(s["a"])(this,e)}return Object(c["a"])(e,null,[{key:"camelCaseToRegular",value:function(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,function(e){e.toUpperCase()})}},{key:"uniqueId",value:function(){return"u"+(++e.iterator).toString(16)}},{key:"chunk",value:function(e,t){return""!==e?e.match(new RegExp(".{1,"+t+"}","g")):[]}},{key:"isWhitespace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e[t];return!!n&&null!==n.match(/\s/)}},{key:"replaceWhitespaces",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e.replace(/\s+/g,t):e.replace(/\s/g,t)}},{key:"removeWhitespaces",value:function(t){return e.replaceWhitespaces(t,"",!0)}},{key:"normalizeWhitespaces",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.replaceWhitespaces(e," ",t)}}]),e}();Object(ce["a"])(be,"iterator",0);var ge=function(){function e(){Object(s["a"])(this,e)}return Object(c["a"])(e,null,[{key:"hexStringFromBytes",value:function(e){return se()(e).map(function(e){return("0"+e.toString(16)).slice(-2)}).join("")}},{key:"bytesFromHexString",value:function(e){var t=[],n=e;n.length%2===1&&(n="0"+n);for(var r=0;r<be.chunk(n,2).length;r++){var a=be.chunk(n,2)[r],o=oe()(a,16);if(null===a.match(/[0-9a-f]{2}/i)||isNaN(o))throw new Error("Invalid hex encoded byte "+a);t.push(o)}return new Uint8Array(t)}},{key:"binaryStringFromBytes",value:function(e){return se()(e).map(function(e){return("0000000"+e.toString(2)).slice(-8)}).join("")}},{key:"bytesFromBinaryString",value:function(e){var t=e;t.length%8>0&&(t=("0000000"+t).substr(t.length%8-1));var n=be.chunk(t,8).map(function(e,t){var n=oe()(e,2);if(null===e.match(/[0-1]{8}/)||isNaN(n))throw new Error("Invalid binary encoded byte "+e);return n});return new Uint8Array(n)}},{key:"base64StringFromBytes",value:function(e){for(var t,n,r,a,o,i,s,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64",u=me[c],l=u.alphabet,f=!u.padCharacterOptional&&u.padCharacter?u.padCharacter:"",d="",h=0;h<e.length;h+=3)t=e[h],n=h+1<e.length?e[h+1]:NaN,r=h+2<e.length?e[h+2]:NaN,a=t>>2,o=(3&t)<<4|n>>4,i=(15&n)<<2|r>>6,s=63&r,d+=l[a]+l[o]+(isNaN(n)?f:l[i])+(isNaN(r)?f:l[s]);if(u.maxLineLength){for(var m="",b=0;b<d.length;b+=u.maxLineLength)m+=(""!==m?u.lineSeparator:"")+d.substr(b,u.maxLineLength);d=m}return d}},{key:"bytesFromBase64String",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64",a=me[r],o=a.alphabet,i=e.length,s=[],c=-1;while(++c<i)if(t=e[c],a.lineSeparator&&t===a.lineSeparator[0]&&e.substr(c,a.lineSeparator.length)===a.lineSeparator)c=c+a.lineSeparator.length-1;else if(t===a.padCharacter);else if(n=o.indexOf(t),-1!==n)s.push(n);else if(a.foreignCharactersForbidden)throw new Error("Forbidden character "+t+"at index "+c);for(var u,l,f,d,h,m,b=[],g=0;g<s.length;g+=4)u=s[g],l=g+1<s.length?s[g+1]:0,f=g+2<s.length?s[g+2]:0,d=g+3<s.length?s[g+3]:0,b.push(u<<2|l>>4),h=(15&l)<<4|f>>2,(g+2<s.length||0!==h)&&b.push(h),m=(3&f)<<6|d,(g+3<s.length||0!==m)&&b.push(m);return new Uint8Array(b)}},{key:"getBase64Variants",value:function(){return Q()(me).map(function(e){var t=me[name];return{name:e,label:t.label,description:t.description}})}}]),e}();function pe(e){var t=Number(e).toString(16);return ve(t,16)}function ve(e,t){var n=e.length,r=e;while(n<t)r="0"+r,n++;return r}function je(e){var t=e.length,n=e.substring(0,t/2),r=e.substring(t/2,t),a={preStr:n,lastStr:r};return a}function ye(e,t){var n=[],r=ge.binaryStringFromBytes(ge.bytesFromHexString(e)).split(""),a=ge.binaryStringFromBytes(ge.bytesFromHexString(t)).split("");r.length>=a.length?a=Array(r.length-a.length).fill("0").concat(a):r=Array(a.length-r.length).fill("0").concat(r);for(var o=0;o<r.length;o++){var i=r[o],s=a[o];i!==s?n.push(1):n.push(0)}return ge.hexStringFromBytes(ge.bytesFromBinaryString(n.join("")))}function Se(e){if(e){var t=e.toString();return t.replace("+",""),ge.base64StringFromBytes(ge.bytesFromHexString(pe(t))).replace(/\=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}}function we(e){if(e)return oe()(ge.hexStringFromBytes(ge.bytesFromBase64String(e.replace(/-/g,"+").replace(/_/g,"/"))),16)}function ke(e,t){var n=je(t),r=n.preStr.toString();return ge.base64StringFromBytes(ge.bytesFromHexString(ye(oe()(e,10).toString(16),r)))}function Pe(e,t,n){var r=oe()(e,10).toString(16),a=oe()(t,10).toString(16),o=je(n),i=o.lastStr,s=ye(r,a),c=ye(s,i);return ge.base64StringFromBytes(ge.bytesFromHexString(c))}function xe(e,t){var n=Number((new Date).valueOf());return e&&t?[ke(n,e),Pe(n,t,e)]:new Error("resultKey or clienHid undefine:resultKey",e,"clienHid",t)}function De(e,t,n){for(var r="+"+e,a=String(t),o=r+a,i=le()(o).substring(0,32),s=n.substring(0,32),c=ye(i,s),u=[],l=2;l<c.length+2;l++)l%2===0&&u.push(String(c[l-2])+c[l-1]);u=u.reverse(),u=u.join("");var f=de.a.fromString(c.substring(16,33),16).add(de.a.fromString(c.substring(0,16),16)).toString();return c+" "+f}function Oe(e){var t,n=we(e).toString();return t=0===n.indexOf("802")?"group":0===n.indexOf("809")?"subscribe":0===n.indexOf("807")?"user":0===n.indexOf("800")||0===n.indexOf("801")||0===n.indexOf("803")||0===n.indexOf("804")||0===n.indexOf("805")||0===n.indexOf("806")||0===n.indexOf("808")?"unknow":"user",t}function Ce(e){for(var t=[],n={},r=0;r<e.length;r++){var a=e[r];n.hasOwnProperty(a.contactid)||"group"!==Oe(a.contactid)&&"user"!==Oe(a.contactid)?console.error("session has same contactid",a.contactid):(n[a.contactid]=!0,t.push(a.contactid))}return t}var Ie={parseXOR:ye,numberToHid:Se,hidToNumber:we,getCurNAndC:xe,getPushRegKey:De,getPeerType:Oe,dialogsDeduplication:Ce},Ee=n("c437"),Ne=n.n(Ee),Re=function e(t,n){Object(s["a"])(this,e),this.seqid=Ne()(),this.tid="WEB153741199"+oe()(100*Math.random(),10),this.total=1,this.scuser=t,this.pageno=1,this.list=[],this.ackids=[n]},Te=n("008b"),_e=n.n(Te),Be=(_e.a,n("c1df"),{name:"Message",components:{LeftNav:V},data:function(){return{filldataHtml:"12",placeholder:"write a message"}},methods:{keydownHandle:function(){console.log(1)},keyupHandle:function(){},inputHandle:function(e){this.filldataHtml=this.$refs.richtextarea.innerText,console.log(this.filldataHtml)},focusHandle:function(){},blurHandle:function(){},pasteHandle:function(e){console.log(1111);var t,n=(e.originalEvent||e).clipboardData,r=n&&n.items||[];for(t=0;t<r.length;t++)if("file"==r[t].kind)return e.preventDefault(),!0;try{var a=n.getData("text/plain")}catch(e){return!0}return a.length&&(document.execCommand("insertText",!1,a),console.log("1212",a),e.preventDefault()),!0},dominsertedHandle:function(e){console.log(1);var t=(e.originalEvent||e).target;(t||{}).src;console.log(21)},copyHandle:function(){},cutHandle:function(){}},mounted:function(){this.filldata="21"}}),Le=Be,Ae=(n("d5dc"),Object(x["a"])(Le,_,B,!1,null,"baea7b1e",null)),ze=Ae.exports,Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:6}},[n("img",{attrs:{src:"",alt:"icon"}})])],1),n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:6}},[n("div",[e._v("Welcome")]),n("el-button",{on:{click:e.login}},[e._v("默认按钮")])],1)],1),n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:6}},[n("InputCard")],1)],1),n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:6}},[n("div",[e._v("欢迎来到官方YeeCall网站客户端")])])],1)],1)},He=[],Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},$e=[],qe={name:"InputCard"},We=qe,Ke=Object(x["a"])(We,Me,$e,!1,null,"63ac0b0f",null),Ue=Ke.exports,Ve=n("f499"),Ge=n.n(Ve),Ye=n("cebe"),Je=n.n(Ye),Ze=n("5880"),Xe=n.n(Ze),Qe=6e5,et=5e3,tt=!0,nt={rid:"",ikey:"",push:"",nonce:"",seqid:"",error:"",mobile:"",client:"",mobilevuid:"",loginStatus:"initial",ncCheck:{n:"",c:"",survivalTime:""}},rt={clienHid:function(){return Ie.hidToNumber(nt.client)},resultKey:function(){return Ie.parseXOR(le()("123"+rt.clienHid()).substring(0,32),nt.ikey)},ncCheck:function(){if((new Date).valueOf()>nt.ncCheck.survivalTime||"success"!==nt.loginStatus){var e=Ie.getCurNAndC(rt.resultKey(),rt.clienHid());nt.ncCheck={n:e[0],c:e[1],survivalTime:(new Date).valueOf()+Qe}}return nt.ncCheck}},at={changeParameter:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&"loginStatus"!==n&&(e[n]=t[n],localStorage.setItem(n,t[n]))},changeLoginStatus:function(e,t){t.hasOwnProperty("loginStatus")&&(e.loginStatus=t.loginStatus,"initial"!==t.loginStatus&&"success"!==t.loginStatus||localStorage.setItem("loginStatus",t.loginStatus))}};(function(){for(var e=Q()(nt),t=0;t<e.length;t++)nt[e[t]]=localStorage.getItem(e[t])||nt[e[t]]})();var ot={namespaced:!0,state:nt,getters:rt,mutations:at},it={messages:{}},st={},ct={},ut={namespaced:!0,state:it,getters:st,mutations:ct},lt=n("cdfc"),ft=n.n(lt),dt={peerCollection:{},length:0},ht={addPeers:function(e,t){if(t&&t.peers)for(var n=0;n<t.peers.length;n++){var r=t.peers[n];e.peerCollection.hasOwnProperty(r.hid)||e.length++,e.peerCollection[r.hid]=r}}},mt={namespaced:!0,state:dt,mutations:ht},bt={dialogs:[]},gt={initDialog:function(e,t){e.dialogs=t.dialogs}},pt={namespaced:!0,state:bt,mutations:gt};a.a.use(Xe.a);var vt=new Xe.a.Store({modules:{userParameter:ot,messageCollection:ut,peerCollection:mt,dialogList:pt}});function jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={baseURL:"/ucapi",headers:{"content-type":"application/x-www-form-urlencoded"},transformRequest:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}};if(t){var r=vt.getters["userParameter/ncCheck"];e.params=e.params||{},e.params.n=r.n,e.params.c=r.c}return Je()(ft.a.merge(n,e))}function yt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={baseURL:"/gatewayapi",headers:{"content-type":"application/x-www-form-urlencoded"}};return Je()(ft.a.merge(t,e))}Je.a.defaults.retry=3,Je.a.defaults.retryDelay=1e3,Je.a.defaults.shouldRetry=function(e){return!0},Je.a.interceptors.response.use(function(e){switch(console.log("response",e),e.data.responseHeader.status){case 200:return e.data.response;case 4004:console.log("TODO重连");break;default:return l.a.reject(e.data.responseHeader.status)}},function(e){return console.log("error",e),l.a.reject(e)});var St,wt,kt,Pt=n("4328"),xt=n.n(Pt),Dt=n("7618");function Ot(e){return new l.a(function(t,n){var r=[Ct(e),It(e)];l.a.all(r).then(function(n){for(var r=n[0]||{},a=n[1]||{},o=[],i=0;i<e.length;i++){var s=e[i],c=r[s]||{},u=a[s];"object"===Object(Dt["a"])(u)&&(c.detail=u),c.hid=s,c.survivalTime=(new Date).valueOf()+Qe,o.push(c)}w.peersStorage.setItemArray(o),t(o)},function(e){n(e)})})}function Ct(e){return jt({url:"/profile/".concat(vt.state.userParameter.client,"/view"),method:"POST",params:{usevuid:tt?1:0},data:{users:e.join(",")}})}function It(e){return jt({url:"/contact/".concat(vt.state.userParameter.client,"/getdetail"),method:"POST",data:{users:e.join(",")}})}var Et=Je.a.CancelToken;function Nt(){return wt=yt({url:"/webim/push/sync",method:"POST",params:{user:Ie.numberToHid(vt.state.userParameter.mobile)},data:Ge()(new Re(vt.state.userParameter.client,vt.state.userParameter.seqid)),cancelToken:new Et(function(e){St=e})}),wt}function Rt(){wt||Tt()}function Tt(){Nt().then(function(e){Bt(e),Tt(),console.log(e)}).catch(function(e){Je.a.isCancel(e)?console.log("Request canceled",e.message):(console.log(e),kt=setTimeout(Tt,et))})}function _t(){clearTimeout(kt),St("exitPolling")}function Bt(e){if(e.list&&e.list.length>0){vt.commit("userParameter/changeParameter",{seqid:e.seqid});for(var t=e.list,n=0;n<t.length;n++){var r=JSON.parse(t[n]);switch(r.c){case"PushRegRes":"OK"===r.m.state&&vt.commit("userParameter/changeLoginStatus",{loginStatus:"bind"});break;case"SideClientBind":Lt(r);break;default:break}}}}function Lt(e){if("Acceptted"===e.m.state||"Binded"===e.m.state){vt.commit("userParameter/changeLoginStatus",{loginStatus:"success"});var t=Ie.dialogsDeduplication(e.m.session);Ot(t).then(function(e){vt.commit("peerCollection/addPeers",{peers:At(e)}),vt.commit("dialogList/initDialog",{dialogs:t})})}else vt.commit("userParameter/changeLoginStatus",{loginStatus:"initial"})}function At(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.hasOwnProperty("dialogInfo")||(r.dialogInfo={lastReactTime:n})}return t}var zt={start:Rt,exitPolling:_t};function Ft(){"initial"===vt.state.userParameter.loginStatus&&vt.commit("userParameter/changeLoginStatus",{loginStatus:"create"})}function Ht(){var e=(new Date).valueOf();jt({url:"/sideclient/binding/directcreate",method:"POST",params:{user:Ie.numberToHid(vt.state.userParameter.mobile)},data:{rid:e,v:"123"}},!1).then(function(t){vt.commit("userParameter/changeParameter",{rid:e,ikey:t.ikey,client:t.client,mobilevuid:t.mobilevuid,nonce:oe()(1e3*Math.random(),10)}),vt.commit("userParameter/changeLoginStatus",{loginStatus:"getPush"})}).catch(function(e){console.log("directcreate error",e),vt.commit("userParameter/changeParameter",{error:e}),vt.commit("userParameter/changeLoginStatus",{loginStatus:"error"})})}function Mt(){jt({url:"/sideclient/".concat(vt.state.userParameter.client,"/sc"),method:"GET",params:{user:Ie.numberToHid(vt.state.userParameter.mobile)}}).then(function(e){vt.commit("userParameter/changeParameter",{push:e.push}),vt.commit("userParameter/changeLoginStatus",{loginStatus:"connect"})}).catch(function(e){console.log("sc error",e),vt.commit("userParameter/changeParameter",{error:e}),vt.commit("userParameter/changeLoginStatus",{loginStatus:"error"})})}function $t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=vt.getters["userParameter/ncCheck"];yt({url:"/webim/sideclient/connect",method:"POST",data:xt.a.stringify({n:n.n,c:n.c,force:e,waitfor:t,phone:vt.state.userParameter.mobile,scuser:vt.state.userParameter.client,addr:vt.state.userParameter.push.split(":")[0],port:vt.state.userParameter.push.split(":")[1]})}).then(function(e){vt.commit("userParameter/changeLoginStatus",{loginStatus:"pushReg"})}).catch(function(e){console.log("connect error",e),vt.commit("userParameter/changeParameter",{error:e}),vt.commit("userParameter/changeLoginStatus",{loginStatus:"error"})})}function qt(){yt({url:"/webim/push/send",method:"POST",data:encodeURIComponent(Ge()({pageno:1,scuser:vt.state.userParameter.client,list:[{c:"PushReg",f:"+"+vt.getters["userParameter/clienHid"],m:{rid:Number(vt.state.userParameter.rid),net:"WiFi",loc:"zh-Hans-CN_CN",info:{model:"x86_64",clientver:"3.7"},ck:Ie.getPushRegKey(vt.getters["userParameter/clienHid"],Number(vt.state.userParameter.rid),vt.getters["userParameter/resultKey"]),ver:1}}]}))}).then(function(e){zt.start()}).catch(function(e){console.log("pushReg error",e),vt.commit("userParameter/changeParameter",{loginStatus:"error",error:e})})}function Wt(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];yt({url:"/webim/push/send",method:"POST",data:encodeURIComponent(Ge()({pageno:1,scuser:vt.state.userParameter.client,total:1,seqid:"07d870"+oe()(100*Math.random(),10),tid:"WEB153741199"+oe()(100*Math.random(),10),list:[{c:"SideClientBind",f:"+"+vt.getters["userParameter/clienHid"],t:"+"+vt.state.userParameter.mobile,l:30,m:{act:e?"AutoRebind":"Request",nonce:Number(vt.state.userParameter.nonce)}}]}))}).then(function(e){zt.start()}).catch(function(e){console.log("bind error",e),vt.commit("userParameter/changeParameter",{error:e}),vt.commit("userParameter/changeLoginStatus",{loginStatus:"error"})})}var Kt={login:Ft,create:Ht,getPush:Mt,connect:$t,pushReg:qt,bind:Wt},Ut=(n("3e8f"),{name:"Login",data:function(){return{pageStatus:""}},components:{InputCard:Ue},methods:{login:function(){this.$store.commit("userParameter/changeParameter",{mobile:"8619987512936"}),Kt.login()},cancel:function(){zt.exitPolling(),this.$store.commit("userParameter/changeLoginStatus",{loginStatus:"initial"})},showError:function(){var e=this,t="未知错误";switch(this.$store.state.userParameter.error){case 706:t="服务器错误，请30秒后重试";case 707:t="手机未在线，请先登录手机端";break;default:break}this.$alert(t,"错误",{confirmButtonText:"确定",callback:function(t){e.$store.commit("userParameter/changeLoginStatus",{loginStatus:"initial"})}})}},computed:{status:function(){return this.$store.state.userParameter.loginStatus}},watch:{status:function(e,t){switch(console.log(e),e){case"initial":this.text="登陆";break;case"create":Kt.create();break;case"getPush":Kt.getPush();break;case"connect":Kt.connect();break;case"pushReg":Kt.pushReg();break;case"bind":Kt.bind();break;case"success":break;case"error":this.showError();break;default:break}}},created:function(){},beforeCreate:function(){console.log(this.$store.state.userParameter.rid+"+")}}),Vt=Ut,Gt=(n("9634"),Object(x["a"])(Vt,Fe,He,!1,null,"d1dc022a",null)),Yt=Gt.exports,Jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box"},[e._v("\n    404  \n    "),n("router-link",{attrs:{to:{name:"main"}}},[e._v(e._s(e.$t("common.backMain")))])],1)},Zt=[],Xt={},Qt=Xt,en=(n("1f86"),Object(x["a"])(Qt,Jt,Zt,!1,null,"52b03018",null));en.exports;a.a.use(N.a),a.a.use(T.a);var tn=new N.a({mode:"history",routes:[{path:"/",component:Yt,name:"Login",children:[]},{path:"/message",component:ze,name:"message"},{path:"/*",component:Yt,name:"Login"}]});tn.beforeEach(function(e,t,n){n()});var nn=tn,rn=n("12cb"),an=n.n(rn),on=n("4eb5"),sn=n.n(on),cn=n("6112"),un=n.n(cn),ln=n("5f72"),fn=n.n(ln),dn=(n("0fae"),n("04f2"),n("76a0"));a.a.component(dn["Actionsheet"].name,dn["Actionsheet"]),a.a.component(dn["Radio"].name,dn["Radio"]),a.a.use(fn.a),a.a.config.productionTip=!1,sn.a.config.autoSetContainer=!0,a.a.use(I.a),a.a.use(sn.a),a.a.use(un.a);var hn=new I.a({locale:"zh-cn",fallbackLocale:"en",messages:{en:an.a.en,"zh-cn":an.a.zh_cn,"zh-tw":an.a.zh_tw}});new a.a({i18n:hn,router:nn,store:vt,render:function(e){return e(O)}}).$mount("#app")},5880:function(e,t){e.exports=Vuex},"5f72":function(e,t){e.exports=ELEMENT},6389:function(e,t){e.exports=VueRouter},"76b7":function(e,t,n){"use strict";var r=n("eaa2"),a=n.n(r);a.a},"85b3":function(e,t){e.exports=VueI18n},"8bbf":function(e,t){e.exports=Vue},"92a7":function(e,t,n){},9300:function(e,t,n){"use strict";var r=n("0c6b"),a=n.n(r);a.a},9634:function(e,t,n){"use strict";var r=n("54a4"),a=n.n(r);a.a},caa2:function(e,t,n){},cebe:function(e,t){e.exports=axios},d5dc:function(e,t,n){"use strict";var r=n("caa2"),a=n.n(r);a.a},eaa2:function(e,t,n){}});